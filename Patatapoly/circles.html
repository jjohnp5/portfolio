<!DOCTYPE html>
<html>
<head>
	<title>Pataclone Polygon Shapes</title>
	<script type="text/javascript" src="./paper-full.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/howler/1.1.28/howler.js"></script>
	<link rel="stylesheet" type="text/css" href="circles.css">

	<script type="text/paperscript" canvas="myCanvas">
		var keyData = {
			q: {
				sound: new Howl({
				urls: ['./sounds2/scifi1.mp3']
				})
			},
			w: {
				sound: new Howl({
				urls: ['./sounds2/scifi2.mp3']
				})
			},
			e: {
				sound: new Howl({
				urls: ['./sounds2/scifi3.mp3']
				})
			},
			r: {
				sound: new Howl({
				urls: ['./sounds2/scifi4.mp3']
				})
			},
			t: {
				sound: new Howl({
				urls: ['./sounds2/scifi5.mp3']
				})
			},
			y: {
				sound: new Howl({
				urls: ['./sounds2/scifi6.mp3']
				})
			},
			u: {
				sound: new Howl({
				urls: ['./sounds2/scifi7.mp3']
				})
			},
			i: {
				sound: new Howl({
				urls: ['./sounds2/scifi8.mp3']
				})
			},
			o: {
				sound: new Howl({
					urls: ['./sounds2/scifi9.mp3']
				})
			},
			p: {
				sound: new Howl({
				urls: ['./sounds2/scifi10.mp3']
				})
			},
			a: {
				sound: new Howl({
				urls: ['./sounds2/scifi11.mp3']
				})
			},
			s: {
				sound: new Howl({
				urls: ['./sounds2/scifi12.mp3']
				})
			},
				d: {
				sound: new Howl({
				urls: ['./sounds2/scifi13.mp3']
				})
			},
			f: {
				sound: new Howl({
				urls: ['./sounds2/scifi14.mp3']
				})
			},
			g: {
				sound: new Howl({
				urls: ['./sounds2/scifi16.mp3']
				})
			},
			h: {
				sound: new Howl({
				urls: ['./sounds2/scifi17.mp3']
				})
			},
			j: {
				sound: new Howl({
				urls: ['./sounds2/scifi18.mp3']
				})
			},
			k: {
				sound: new Howl({
				urls: ['./sounds2/scifi19.mp3']
				})
			},
			l: {
				sound: new Howl({
				urls: ['./sounds2/scifi20.mp3']
				})
			},
			z: {
				sound: new Howl({
				urls: ['./sounds/suspension.mp3']
				})
			},
			x: {
				sound: new Howl({
				urls: ['./sounds/timer.mp3']
				})
			},
			c: {
				sound: new Howl({
				urls: ['./sounds/ufo.mp3']
				})
			},
			v: {
				sound: new Howl({
				urls: ['./sounds/veil.mp3']
				})
			},
			b: {
				sound: new Howl({
				urls: ['./sounds/wipe.mp3']
				})
			},
			n: {
				sound: new Howl({
					urls: ['./sounds/zig-zag.mp3']
				})
			},
			m: {
				sound: new Howl({
				urls: ['./sounds/moon.mp3']
				})
			}
		}

		var shapes = [];

		function onKeyDown(event) {
			if(keyData[event.key]){
				var maxPoint = new Point(view.size.width, view.size.height);
				var randomPoint = Point.random();
				var point1 = maxPoint * randomPoint;
				var randomSides = Math.floor(Math.random()*10) + 3;
				var newCircle = new Path.RegularPolygon(point1, randomSides, 500);
				newCircle.fillColor = randomColor();
				keyData[event.key].sound.play();
				shapes.push(newCircle);
			}
		}

		function onFrame(event){
		  for(var i = 0; i < shapes.length; i++){
			var randomX = Math.floor(Math.random() * 10)-5;
			var randomY = Math.floor(Math.random() * 10)-5;
			shapes[i].scale(0.9);
			shapes[i].translate(randomX, randomY);
			shapes[i].fillColor.hue += 3;
			if(shapes[i].area < 1){
				shapes[i].remove();
			  shapes.splice(i, 1);
			  console.log(shapes);
					  }
		  }
		}
		var randomColor = function(){
			var r = Math.floor(Math.random()*255)+1;
			var g = Math.floor(Math.random()*255)+1;
			var b = Math.floor(Math.random()*255)+1;
		return 'rgb('+r+','+g+','+b+')';

		}
		var text = new PointText((view.size.width/2)-50, (view.size.height - 50));
		text.content = 'Sounds by Soundjig';
		text.onClick = function(){
			location.href = "http://www.soundjig.com";
		}
		var backToSite = new PointText(10,10);
		backToSite.content = "Go Back to Site";
		backToSite.onClick = function(){
			location.href = "http://www.johnlagmay.com";
			}
	</script>
	<script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-77134225-1', 'auto');
        ga('send', 'pageview');

	</script>
</head>
<body>
	<canvas id="myCanvas" resize></canvas>
</body>
</html>